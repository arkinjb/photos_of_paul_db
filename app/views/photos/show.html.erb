<div class="photo_page" >
  <h2><%= @photo.title %></h2>
  <%= image_tag @photo.photo_url %>
  <p>Uploaded by <%= link_to @photo.user.username, user_path(@photo.user.id) %> on <%= @photo.created_at.strftime(" %b %d, %Y") %></p>
  <p>Copy photo url</p>
  <% if current_user.favorite_photos.exists?(photo_id: @photo.id) %>
    <%= link_to "Unfavorite", remove_favorite_photo_path(@photo), method: :post %>
  <% else %>
    <%= link_to "Favorite", add_favorite_photo_path(@photo), method: :post %>
  <% end %>

  <% if can? :update, @photo %>
    <%= link_to "Edit Photo", edit_photo_path(@photo) %>
  <% end %>
</div>

<div class="comment_container">
  <ul>
    <% @comments.each do |comment| %>

        <li>
          <%= comment.content %> by <%= link_to comment.user.username, user_path(comment.user.id) %> <span><%= time_ago_in_words(comment.created_at) %></span> ago

          <% if can? :update, comment %>
            <%= link_to "Edit Comment", edit_photo_comment_path(@photo, comment) %>
          <% end %>
        </li>

    <% end %>


    <% if can? :create, Comment %>
      <%= form_for [@photo, Comment.new] do |f| %>
        <%= f.label :content, "Add a New Comment" %>
        <%= f.text_area :content %>

        <%= f.submit %>
      <% end %>
    <% end %>

  </ul>
</div> <!-- end of comment container div -->
